<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Report</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="main-nav">
        <ul>
            <li class="items">
                <a class="nav-items" href=".././view-reservation/viewReservation.html">VIEW RESERVATION</a>
            </li>
            <li class="items">
                <a class="nav-items" href=".././make-reservation/makeReservation.html">MAKE RESERVATION</a>
            </li>
            <li class="items">
                <a class="nav-items" href=".././del-reservation/delReservation.html">DELETE RESERVATION</a>
            </li>
            <li class="items">
                <a class="nav-items" href=".././generate-report/genReport.html">GENERATE REPORT</a>
            </li>
            <li class="items">
                <a class="nav-items" href="../index.html">BACK TO HOMEPAGE</a>
            </li>
        </ul>
    </nav>
    <div class="title-logo">
        <img src="../images/icons/archive.png" alt="search" class="icon">
        <h1>GENERATE REPORT</h1>
    </div>
    <div class="wrapper">
        <div class="content">
            <div class="container-title">
                <img src="../images/icons/printer.png" alt="user" class="icon-title">
                <h2>DATA REPORTS</h2>
            </div>
            <div id="content" class="container-content">
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Date of Vaccination</th>
                            <th>Time of Vaccination</th>
                            <th>No. of Adults</th>
                            <th>No. of Children</th>
                         </tr>
                    <tbody id="myTable"></tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        var array;
        var children = 0;
        var adult = 0;
        var data = JSON.parse(window.localStorage.getItem("Data"));

        if (data == null) {
            array = [];
        }
        else {
            array = data;
        }

        function showData(){
            var table = document.getElementById("myTable");
            var datahtml = "";
            for (var x of array) {
                datahtml += `
                        <tr>
                            <td>${x.Name}</td>
                            <td>${x.Date}</td>
                            <td>${x.Time}</td>
                            <td>${x.NumAdults}</td>
                            <td>${x.NumChildren}</td>
                        </tr>`;
                children += x.NumChildren;
                adult += x.NumAdults;
            }
            datahtml += `<tr>
                <td id="empty-table" colspan="3"></td>
                <td id="grand-total" colspan="2">GRAND TOTAL: â‚±${(children * 800) + (adult * 1200)}</td>
                </tr>`;

            table.innerHTML = datahtml;
	    }
        showData();
    
    </script>
</body>